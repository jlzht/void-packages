# Template file for 'gst-plugins-good1'
pkgname=gst-plugins-good1
version=1.22.7
revision=1
build_style=meson
configure_args="-Ddv=disabled -Ddv1394=disabled -Dshout2=disabled -Dqt5=disabled
 -Dximagesrc=disabled -Dximagesrc-xshm=disabled -Dximagesrc-xfixes=disabled
 -Dximagesrc-xdamage=disabled $(vopt_feature gtk3 gtk3) -Daalib=disabled
 -Dlibcaca=disabled"
# XXX: libdv, dv1394 and shout2 modules.
hostmakedepends="pkg-config intltool glib-devel orc"
makedepends="
 libpng-devel libxml2-devel libgudev-devel libflac-devel
 taglib-devel libsoup-gnome-devel
 gst-plugins-base1-devel
 pulseaudio-devel orc-devel wavpack-devel
 v4l-utils-devel jack-devel speex-devel libvpx-devel lame-devel
 mpg123-devel twolame-devel $(vopt_if wayland)
 $(vopt_if gtk3 gtk+3-devel)"
depends="gst-plugins-base1>=${version}"
short_desc="GStreamer set of well-maintained good plug-ins (1.x)"
maintainer="Orphaned <orphan@voidlinux.org>"
license="LGPL-2.1-or-later"
homepage="https://gstreamer.freedesktop.org"
changelog="https://gstreamer.freedesktop.org/releases/${version%.*}/#${version}"
distfiles="https://gstreamer.freedesktop.org/src/gst-plugins-good/gst-plugins-good-${version}.tar.xz"
checksum=b6db0e18e398b52665b7cdce301c34a8750483d5f4fbac1ede9f80b03743cd15

build_options="gtk3 wayland"
build_options_default="gtk3 wayland"

do_check() {
	ninja -C build test || : #Fails on i686
}
